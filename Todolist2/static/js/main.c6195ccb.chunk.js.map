{"version":3,"sources":["Todo.js","App.js","serviceWorker.js","index.js"],"names":["STATUSES","split","Todo","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","editing","inputRef","React","createRef","e","setState","newTitle","current","innerText","onTitleChange","focus","react_default","a","createElement","className","status","onClick","onStatusChange","contentEditable","onDoubleClick","onEditionStart","bind","onBlur","onEditionEnd","ref","title","creation","Component","LSPROP","App","existing","localStorage","getItem","JSON","parse","todos","id","setItem","stringify","objectSpread","map","todo","assign","s","indexOf","length","filter","keyCode","target","value","t","reduce","acc","o","Math","max","Date","toISOString","replace","concat","_this2","Todo_Todo","key","type","placeholder","onKeyUp","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.c6195ccb.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './Todo.css';\n\nconst STATUSES = \"todo,ongoing,finished,removed,canceled\".split(/,/g);\nfunction nextStatus(s) {\n    return STATUSES[(1+STATUSES.indexOf(s || \"\"))%(STATUSES.length)]\n}\n\nclass Todo extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editing: false,\n    }\n    this.inputRef = React.createRef();\n  }\n  onEditionStart(e) {\n    if(!(this.state.editing)) {\n        this.setState({editing:true});\n    }\n  }\n  onEditionEnd(e) {\n    if(this.state.editing) {\n        this.setState({editing:false});\n        const newTitle = this.inputRef.current.innerText;\n        this.props.onTitleChange(newTitle);\n    }\n  }\n  componentDidUpdate() {\n    if(this.state.editing) {\n        this.inputRef.current.focus();\n    }\n  }\n  render() {\n    return (\n      <div className={\"task \"+(this.props.status || \"todo\")}>\n        <button onClick={this.props.onStatusChange} />\n        <span contentEditable={this.state.editing}\n            onDoubleClick={this.onEditionStart.bind(this)}\n            onBlur={this.onEditionEnd.bind(this)}\n            ref={this.inputRef}\n            >{this.props.title}</span>\n        <time>{this.props.creation}</time>\n      </div>\n    );\n  }\n}\n\nexport {Todo,nextStatus};\n","import React, { Component } from 'react';\nimport { Todo, nextStatus } from './Todo';\nimport './App.css';\n\nconst LSPROP = \"Todo_List_JSON\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    const existing = localStorage.getItem(LSPROP);\n    this.state = (existing)?(\n      JSON.parse(existing)\n    ):({\n      todos: [\n        {id:1,status:\"finished\",title:\"Taste react\",creation:\"2019-01-02\"},\n        {id:2,status:\"todo\",title:\"Bake some morning coffee\",creation:\"2019-01-03\"},\n      ],\n    });\n  }\n  componentWillUpdate() {\n    localStorage.setItem(LSPROP, JSON.stringify({\n        ...this.state\n    }));\n  }\n  onStatusChange(id, e) {\n    this.setState({\n        todos:this.state.todos.map(todo=>{\n            if(todo.id === id) {\n                return Object.assign({}, todo, {\n                    status:nextStatus(todo.status),\n                });\n            }\n            return todo;\n        }),\n    });\n  }\n  onTitleChange(id, newTitle) {\n    if(newTitle) {\n        this.setState({\n            todos:this.state.todos.map(todo=>{\n                if(todo.id === id) {\n                    return Object.assign({}, todo, {\n                        title:newTitle,\n                    });\n                }\n                return todo;\n            }),\n        });\n    } else {\n        this.setState({\n            todos:this.state.todos.filter(todo=>todo.id !== id),\n        });\n    }\n  }\n  onKeyUp(e) {\n    if(e.keyCode === 13) {\n      const newTitle = e.target.value;\n      const i = this.state.todos.reduce((acc,o)=>Math.max(acc,o.id),0);\n      const t = {\n        id:(i+1), title:newTitle, status:\"todo\",\n        creation: new Date().toISOString().replace(/T.*/,\"\"),\n      };\n      this.setState({\n        todos:[t].concat(this.state.todos),\n      });\n      e.target.value = \"\";\n    }\n  }\n  render() {\n    return (\n      <div className=\"App\">\n        <h1>Todo list #2</h1>\n        <ul>\n          {this.state.todos.map(todo=>(\n            <Todo key={todo.id} title={todo.title}\n                status={todo.status} creation=\"2019-01-03\"\n                onStatusChange={this.onStatusChange.bind(this, todo.id)}\n                onTitleChange={this.onTitleChange.bind(this, todo.id)}\n                />\n          ))}\n        </ul>\n        <input type=\"text\" placeholder=\"New todo\" \n            onKeyUp={this.onKeyUp.bind(this)}/>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}